@model IFinanceStatInteractive
<div class="col-separator-h box"></div>
<div class="innerAll finances_summary">
    <!-- Row -->
    <div class="row">

        <!-- Column -->
        <div class="col-md-4">
            <div class="innerAll">
                <div class="well margin-none">
                   Расходы <strong>@Model.Balance.Sum(m=>m.Value.ElementAt(0)).ToString("c")</strong>
                </div>
                <div class="innerAll center">
                    <span class="glyphicons flash standard"><i></i></span>
                </div>
                <div class="well">
                    Доходы <strong>@Model.Balance.Sum(m => m.Value.ElementAt(1)).ToString("c")</strong>
                </div>
            </div>
        </div>
        <!-- // Column END -->
        <!-- Column -->
        <div class="col-md-8">
            <!-- Simple Chart -->
            <div id="chart_simple" class="flotchart-holder"></div>
        </div>
        <!-- // Column END -->

    </div>
    <!-- // Row END -->

</div>
<div class="col-separator-h box"></div>
<div class="innerAll bg-gray">
    <h5 class="strong border-bottom innerB margin-none">Платежи</h5>
    <!-- Table -->
    <table class="table table-vertical-center table-thead-simple margin-none">
        <thead>
            <tr>
                <th class="center" style="width: 1%">Номер</th>
                <th>Клиент</th>
                <th class="center">Оплатить до</th>
                <th>Тип платежа</th>
                <th class="center">Сумма платежа</th>
                <th class="center">Состояние</th>
                <th class="text-right">Действия</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Transaction.OrderByDescending(m=>m.Key))
	        {
                foreach (var paymentInfo in item.Value)
                {
                    <tr class="selectable">
                        <td class="center">@paymentInfo.Number</td>
                        <td class="strong"><i class="fa fa-fw fa-arrow-@(paymentInfo.Total <0? "down text-danger" : "up text-success")"></i> @paymentInfo.Title</td>
                        <td class="center"><span class="label label-primary">@paymentInfo.PayBefore.ToShortDateString()</span></td>
                        <td class="center">@(((PaymentType)paymentInfo.Type).GetStringValue())</td>
                        <td class="center">@paymentInfo.Total.ToString("c")</td>
                        <td class="center">@paymentInfo.Status</td>
                        @if (paymentInfo.Type == (byte)PaymentType.Expense)
                        { 
                        }
                        else { 
                            <td class="text-right actions">
                                <div class="btn-group btn-group-xs">
                                    <a href="#" class="btn btn-default" onclick="loadModalContentWithCallback('modal-fullscreen', 'PaymentEdit', 'Finances/Payment', '?paymentId=@(paymentInfo.PaymentId)&type=@(paymentInfo.Type)', 'initPaymentCallback');">
                                        <i class=" fa fa-pencil">
                                        </i>Просмотр
                                    </a>
                                </div>
                            </td>
                        }
                    </tr>
                }
	        }
        </tbody>
    </table>
</div>
