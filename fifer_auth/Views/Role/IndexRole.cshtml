@model UserContext.Role
@{
    ViewBag.Title = "Роль " + Model.Name;
    List<UserContext.User> users = ViewBag.Users as List<UserContext.User>;
}

<div>
    <ul class="breadcrumb">
        <li>
            <span>@ViewBag.Title</span>
        </li>
    </ul>
</div>
<div class="sortable row-fluid">

</div>

<div class="row-fluid">
    <div class="box span12">
        <div class="box-header well">
            <h2>@Model.Name</h2>
            <div class="box-icon">
                <a href="#" class="btn btn-minimize btn-round" onclick="loadModalContent('myModal','Rule4RoleModal','Rule', '?roleId=' + @Model.RoleId)" title="Добавить правило для роли"><i class="icon-plus"></i></a>
                <a href="#" title="Свернуть" class="btn btn-minimize btn-round"><i class="icon-chevron-up"></i></a>
                <a href="#" title="Закрыть" class="btn btn-close btn-round"><i class="icon-remove"></i></a>
            </div>
        </div>
        <div class="box-content">
            <div>
              @(Html.Kendo().TabStrip()
              .Name("tabstrip")
              .Items(tabstrip =>
              {
                  tabstrip.Add().Text("Правила")
                          .Selected(true)
                          .Content(@<text>
                            @Html.Action("Rules4Role", "Rule", new { roleId = Model.RoleId })
                        </text>);
                  tabstrip.Add().Text("Пользователи")
                    .Selected(false)
                    .Content(@<text>
                        <div>
                            <form action="/Role/UserInRole?roleId=@Model.RoleId" method="post">
                                <ol>
                                    @foreach (MembershipUser user in Membership.GetAllUsers())
                                    {
                                        <li style="margin-bottom:10px">
                                            <div class="" style="border-bottom:solid 1px">
                                                @if (users.Any(m => m.Login == user.UserName))
                                                {
                                                    <input id="usersInRole" class="" type="checkbox" value="@user.ProviderUserKey" name="usersInRole" checked="checked" />
                                                }
                                                else
                                                {
                                                    <input id="usersInRole" class="" type="checkbox" value="@user.ProviderUserKey" name="usersInRole" />
                                                }
                                                <label for="@user.ProviderUserKey" class="" style="float:right">@user.UserName</label>&nbsp
                                            </div>
                                        </li>
                                    }
                                </ol>
                                <input type="submit" class="btn btn-success" value="Обновить" />
                            </form>
                        </div>
                    </text>);
              })
)
            </div>

        </div>
    </div>
    <div class="row-fluid sortable">
    </div><!--/row-->
</div>
